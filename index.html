<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Whale Migration - Game</title>
<style>
  html,body { margin:0; padding:0; height:100%; background:#87CEEB; overflow:hidden; touch-action:none; -webkit-user-select:none; user-select:none; }
  canvas { position:relative; display:block; width:100vw; height:100vh; }

  .hud-title {
    position: absolute; top: 8px; left: 12px; padding:6px 10px;
    background: rgba(0,0,0,0.35); color: white; border-radius: 8px;
    font-family: sans-serif; font-weight:700; font-size:18px; z-index: 10;
  }
  .hud-counter {
    position: absolute; top: 8px; right: 12px; padding:6px 10px;
    background: rgba(0,0,0,0.35); color: white; border-radius: 8px;
    font-family: monospace; font-size:14px; line-height:1.4; text-align:right; z-index: 10;
  }

  /* Scenario educational text (replaces old bottom-left instructions) */
  .edu {
    position:absolute; left:10px; bottom:10px;
    max-width:min(680px, 72vw);
    color:white; background: rgba(0,0,0,0.38);
    padding:10px 12px; border-radius:10px;
    font-family:sans-serif; font-size:14px; line-height:1.45; z-index: 9;
  }

  /* Mission hint centered in the sky */
  .hint {
    position:absolute; left:50%; transform: translateX(-50%);
    font-family:sans-serif; font-weight:700; text-align:center;
    padding:6px 10px; z-index: 9;
    text-shadow: 0 2px 4px rgba(0,0,0,0.35);
  }
</style>
</head>
<body>
<canvas id="canvas"></canvas>

<div id="title" class="hud-title">Antarctica</div>
<div id="counter" class="hud-counter">Whale1: 0 / 10<br/>Whale2: 0 / 10</div>

<!-- Scenario messaging -->
<div id="edu" class="edu"></div>
<div id="hint" class="hint"></div>

<script>
/* Whale Migration Game (touch-first)
   - Scenarios:
     0 Antarctica: Feed krill (10 each)
     1 Sydney:     Jumps (5 each)
     2 Warm waters: Join whales -> baby calf
   - Touch: each whale follows the NEAREST finger (exclusive assignment)
   - Auto-jump at surface, no flying
   - Baby follows mother; per-whale counters
   - Advance when mission complete AND either whale touches left edge
*/

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const eduEl = document.getElementById("edu");
const hintEl = document.getElementById("hint");

let seaLevel = 0;
function resize() {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
  seaLevel = canvas.height * 0.3;

  // center the mission hint vertically in the sky band
  const hintY = Math.max(12, Math.floor(seaLevel * 0.38));
  hintEl.style.top = `${hintY}px`;
}
window.addEventListener("resize", resize, {passive:true});
resize();

let scenario = 0; // 0: Antarctica, 1: Sydney, 2: Warmer Waters
const titles = ["Antarctica", "Sydney", "Warmer Waters"];

// Entities arrays
let krill = [];
let fish = [];
let boats = [];
let seagulls = [];
let corals = [];

// Baby whale
let baby = null;

// Whale factory
function createWhale(x,y,controls,colors) {
  return {
    x, y, vx:0, vy:0,
    size: Math.min(canvas.width, canvas.height) * 0.06,
    tail:0, jumping:false, jumpPhase:0, canJump:true,
    controls, colors, driftAngle: Math.random()*Math.PI*2,
    krillEaten:0, jumpsDone:0, joined:false,
    target:null, targetActive:false
  };
}

const whale1 = createWhale(canvas.width/2, seaLevel + 200,
  {up:'w',down:'s',left:'a',right:'d',jump:'t'},
  {body1:'#0a4770', body2:'#0c628f', tail:'#093e5f'}
);
const whale2 = createWhale(canvas.width/2 + 180, seaLevel + 260,
  {up:'arrowup',down:'arrowdown',left:'arrowleft',right:'arrowright',jump:'o'},
  {body1:'#0b4c78', body2:'#0e6c9f', tail:'#093e5f'}
);

// ---------- Desktop keys (optional) ----------
let keys = Object.create(null);
window.addEventListener("keydown", e=>{
  const k = e.key.toLowerCase();
  keys[k] = true;
  if (k.startsWith('arrow')) e.preventDefault();
  if (k === whale1.controls.jump && !whale1.jumping) { if (canStartJump(whale1)) startJump(whale1); }
  if (k === whale2.controls.jump && !whale2.jumping) { if (canStartJump(whale2)) startJump(whale2); }
}, {passive:false});
window.addEventListener("keyup", e=> keys[e.key.toLowerCase()] = false);
window.addEventListener("keydown", e=>{
  if (["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)) e.preventDefault();
}, {passive:false});

// Helper: can start jump
function canStartJump(w) { return !w.jumping && w.y >= seaLevel - 5; }
function startJump(w) {
  w.jumping = true; w.jumpPhase = 0;
  if (scenario === 1) { w.jumpsDone = Math.min(w.jumpsDone + 1, 9999); }
}

// ---------- Spawns ----------
function spawnKrill(n=30) {
  // create fewer krill by default and attempt to space them out
  krill = [];
  const minDist = 36; // minimum allowed distance between krill
  for (let i=0;i<n;i++){
    let attempts = 0;
    let x, y, ok;
    do {
      x = Math.random() * canvas.width;
      y = seaLevel + 20 + Math.random() * (canvas.height - seaLevel - 40);
      ok = true;
      for (const k of krill) {
        if (Math.hypot(k.x - x, k.y - y) < minDist) { ok = false; break; }
      }
      attempts++;
    } while (!ok && attempts < 12);

    // push fixed-size, edible krill
    krill.push({
      x,
      y,
      r: 3,
      speed: 0.3 + Math.random() * 0.6,
      eaten: false
    });
  }
}
function spawnFish(n=12) {
  fish = [];
  for (let i=0;i<n;i++){
    fish.push({
      x: Math.random()*canvas.width,
      y: seaLevel + 80 + Math.random()*(canvas.height - seaLevel - 160),
      size: 6 + Math.random()*8,
      speed: 0.6 + Math.random()*1.2
    });
  }
}
function spawnBoats(n=2) {
  boats = [];
  for (let i=0;i<n;i++){
    boats.push({
      x: Math.random()*canvas.width,
      y: seaLevel - 10 - Math.random()*30,
      speed: 0.3 + Math.random()*0.4
    });
  }
}
function spawnSeagulls(n=4) {
  seagulls = [];
  for (let i=0;i<n;i++){
    seagulls.push({
      x: Math.random()*canvas.width,
      y: seaLevel - 40 - Math.random()*80,
      speed: 0.4 + Math.random()*0.6,
      wing: Math.random()*Math.PI*2
    });
  }
}
function spawnCorals(n=8) {
  corals = [];
  for (let i=0;i<n;i++){
    corals.push({
      x: 40 + Math.random()*(canvas.width-80),
      y: canvas.height - (30 + Math.random()*80),
      h: 20 + Math.random()*60,
      w: 8 + Math.random()*18,
    });
  }
}

// ---------- Scenario messaging ----------
function setScenarioMessaging(s) {
  if (s === 0) {
    eduEl.innerHTML = "Humpback whales feed on tiny krill in the icy waters of Antarctica to build fat reserves for their long swim north.";
    hintEl.textContent = "Mission hint: Guide the whales with your fingers and help them to eat enough krill to start their journey to warmer seas.";
    hintEl.style.color = "#000";            // black text for Antartica hint
    hintEl.style.textShadow = "none";       // remove white shadow for black text
  } else if (s === 1) {
    eduEl.innerHTML = "As humpbacks travel north past Sydney, they often leap out of the water, a behaviour called <em>breaching</em>. Scientists think whales breach to communicate, remove parasites, or show strength to other whales.";
    hintEl.textContent = "Mission hint: Guide the whales to the surface to make them jump! (tip: make them move a little down and then up again)";
    hintEl.style.color = "#fff";            // white for Sydney
    hintEl.style.textShadow = "0 2px 4px rgba(0,0,0,0.45)";
  } else {
    eduEl.innerHTML = "In the warm northern waters, humpback whales mate and give birth to their calves. Warm, calm seas protect newborns as their mothers teach them to swim and breathe.";
    hintEl.textContent = "Mission hint: Guide the whales close together, itâ€™s time to welcome a new calf!";
    hintEl.style.color = "#fff";            // white for warm waters
    hintEl.style.textShadow = "0 2px 4px rgba(0,0,0,0.45)";
  }
}

// ---------- Init scenario ----------
function initScenario(s) {
  baby = null;

  whale1.krillEaten = 0; whale1.jumpsDone = 0; whale1.joined = false;
  whale2.krillEaten = 0; whale2.jumpsDone = 0; whale2.joined = false;

  if (s === 0) { // Antarctica: krill only (avoid confusion with other shapes)
    // use fewer krill for clearer scene and more separation
    spawnKrill(28);
    spawnFish(0);
    spawnBoats(0);
    spawnSeagulls(0);
    spawnCorals(0);
  } else if (s === 1) { // Sydney
    spawnKrill(0);
    // remove small triangle animation (fish) and boats for Sydney
    spawnFish(0);
    spawnBoats(0);
    spawnSeagulls(6);
    spawnCorals(0);
  } else { // Warm waters
    spawnKrill(0);
    spawnFish(10);
    spawnBoats(0);
    spawnSeagulls(4);
    // remove corals as requested
    spawnCorals(0);
  }

  // place whales near the center of the screen on scenario start
  const centerX = canvas.width / 2;
  const horizSpacing = Math.max(whale1.size, 120);
  whale1.x = centerX - horizSpacing;
  whale2.x = centerX + horizSpacing;
  // position vertically around mid-water (well below the surface)
  whale1.y = canvas.height / 2; 
  whale2.y = canvas.height / 2 + Math.min(whale2.size * 0.35, 40);
  whale1.vx = whale1.vy = whale2.vx = whale2.vy = 0;

  whale1.target = whale2.target = null;
  whale1.targetActive = whale2.targetActive = false;

  setScenarioMessaging(s);
}
initScenario(scenario);

// ---------- Drawing ----------
function drawBackground() {
  const w = canvas.width, h = canvas.height;
  let sky, sea;
  if (scenario === 0) { // Antarctica
    sky = ctx.createLinearGradient(0,0,0,seaLevel); sky.addColorStop(0,"#dff4ff"); sky.addColorStop(1,"#9fdcff");
    sea = ctx.createLinearGradient(0,seaLevel,0,h); sea.addColorStop(0,"#0e4d80"); sea.addColorStop(1,"#012f4a");
  } else if (scenario === 1) { // Sydney
    sky = ctx.createLinearGradient(0,0,0,seaLevel); sky.addColorStop(0,"#b6e0ff"); sky.addColorStop(1,"#6bb7e0");
    sea = ctx.createLinearGradient(0,seaLevel,0,h); sea.addColorStop(0,"#1d6ea1"); sea.addColorStop(1,"#054064");
  } else { // Warm waters
    sky = ctx.createLinearGradient(0,0,0,seaLevel); sky.addColorStop(0,"#9fdfff"); sky.addColorStop(1,"#6fd0ff");
    // subtle gradient centered on the requested warmer-water colour (#47bfb5)
    sea = ctx.createLinearGradient(0,seaLevel,0,h);
    sea.addColorStop(0, "#25a8a0");
    sea.addColorStop(1, "#0d827b");
  }
  ctx.fillStyle = sky; ctx.fillRect(0,0,w,seaLevel);
  ctx.fillStyle = sea; ctx.fillRect(0,seaLevel,w,h-seaLevel);

  // animated waves
  ctx.beginPath();
  for (let x=0;x<w;x+=15){
    const y = seaLevel + Math.sin((x/50)+Date.now()/800)*2;
    if (x===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
  }
  ctx.strokeStyle = "rgba(255,255,255,0.5)";
  ctx.lineWidth = 2; ctx.stroke();

  // Title
  document.getElementById('title').innerText = titles[scenario];

  // Surface/air extras
  if (scenario === 1) {
   
  } else if (scenario === 2) { seagulls.forEach(g=>{ g.x += g.speed; if(g.x>canvas.width+60) g.x=-60; drawSeagull(g); }); }
}


function drawSeagull(g){ ctx.strokeStyle="#fff"; ctx.lineWidth=2;
  ctx.beginPath(); ctx.moveTo(g.x, g.y); ctx.lineTo(g.x+10, g.y + Math.sin(g.wing)*5);
  ctx.moveTo(g.x, g.y); ctx.lineTo(g.x-10, g.y + Math.sin(g.wing)*5); ctx.stroke(); g.wing += 0.2;
}

/* --- FOOD: krill as small round dots only --- */
function drawKrill(k){
  // krill color updated to requested hex and drawn uniformly sized
  ctx.fillStyle = "#e6a447";
  ctx.beginPath(); ctx.arc(k.x, k.y, k.r, 0, Math.PI*2); ctx.fill();
}


function drawWhale(w) {
  const s = w.size;
  ctx.save();
  ctx.translate(w.x, w.y);
  const flip = w.vx < 0 ? -1 : 1;
  ctx.scale(flip, 1);
  let angle = 0;
  if (w.jumping) angle = -Math.sin(Math.PI * w.jumpPhase) * 0.5;
  else angle = (w.vy || 0) * 0.05;
  ctx.rotate(angle);

  const grad = ctx.createLinearGradient(-s*1.5,0,s*1.5,0);
  grad.addColorStop(0,w.colors.body1); grad.addColorStop(1,w.colors.body2);
  ctx.fillStyle = grad;
  ctx.beginPath();
  ctx.moveTo(-s*1.5,0);
  ctx.bezierCurveTo(-s*1.2, -s*0.6, s*1.2, -s*0.6, s*1.5,0);
  ctx.bezierCurveTo(s*1.2, s*0.6, -s*1.2, s*0.6, -s*1.5,0);
  ctx.fill();

  ctx.fillStyle = "rgba(255,255,255,0.25)";
  ctx.beginPath();
  ctx.moveTo(-s*0.5, s*0.2); ctx.quadraticCurveTo(s*0.8, s*0.5, s*1.2,0); ctx.fill();

  ctx.save(); ctx.translate(-s*1.5,0); ctx.rotate(Math.sin(w.tail)*0.5);
  ctx.fillStyle = w.colors.tail;
  ctx.beginPath(); ctx.moveTo(0,0);
  ctx.bezierCurveTo(-s*0.3, -s*0.4, -s*1.2, -s*0.4, -s*1.2,0);
  ctx.bezierCurveTo(-s*1.2, s*0.4, -s*0.3, s*0.4, 0,0); ctx.fill(); ctx.restore();

  ctx.save(); ctx.translate(-s*0.2, s*0.2); ctx.rotate(-0.5);
  ctx.fillStyle = w.colors.tail;
  ctx.beginPath(); ctx.moveTo(0,0); ctx.quadraticCurveTo(-s*0.6, s*0.4, -s*0.9, s*0.1); ctx.fill();
  ctx.restore();

  ctx.beginPath(); ctx.arc(s*0.3, -s*0.15, s*0.07, 0, Math.PI*2);
  ctx.fillStyle="#001622"; ctx.fill();
  ctx.restore();
}

// ---------- Mission ready & arrow ----------
let missionReady = false;
let showLeftArrow = false;
let arrowPulse = 0;

function drawLeftArrow() {
  if (!showLeftArrow) return;
  const ax = 40, ay = canvas.height/2;
  arrowPulse += 0.05; const p = 1 + Math.sin(arrowPulse)*0.08;
  ctx.save(); ctx.translate(ax, ay); ctx.scale(p,p);
  ctx.fillStyle = "rgba(255,255,255,0.9)";
  ctx.beginPath();
  ctx.moveTo(0,0); ctx.lineTo(20,-14); ctx.lineTo(20,-6); ctx.lineTo(60,-6);
  ctx.lineTo(60,6); ctx.lineTo(20,6); ctx.lineTo(20,14); ctx.closePath();
  ctx.fill(); ctx.restore();
}
function drawEdgeHint() {
  if (!showLeftArrow) return;
  const x = 32;
  const baseYs = [seaLevel + 70, seaLevel + 190, seaLevel + 310];
  const now = performance.now() / 1000;
  ctx.save();
  for (let i=0;i<baseYs.length;i++){
    const y = Math.min(canvas.height - 40, baseYs[i]);
    const phase = now*2 + i*0.8;
    const r = 10 + (Math.sin(phase)*0.5 + 0.5) * 16;
    ctx.lineWidth = 2;
    ctx.strokeStyle = "rgba(255,255,255,0.55)";
    ctx.globalAlpha = 0.7;
    ctx.beginPath();
    ctx.arc(x, y, r, -Math.PI*0.6, Math.PI*0.6);
    ctx.stroke();
    const bubY = y - (phase%1)*18;
    ctx.globalAlpha = 0.5;
    ctx.fillStyle = "rgba(255,255,255,0.6)";
    ctx.beginPath();
    ctx.arc(x+6, bubY, 2.2, 0, Math.PI*2);
    ctx.fill();
  }
  ctx.restore();
}

// ---------- Update whales ----------
function updateWhale(w){
  const speed = 0.18;
  let isControlled = false;

  // touch guide (steer toward assigned target)
  if (!w.jumping && w.targetActive && w.target) {
    const dx = w.target.x - w.x;
    const dy = w.target.y - w.y;
    const dist = Math.hypot(dx,dy);
    if (dist > 8) {
      const ux = dx / dist, uy = dy / dist;
      w.vx += ux * 0.22;
      w.vy += uy * 0.18;
      isControlled = true;
    } else {
      w.targetActive = false;
    }
  }

  // keyboard (desktop fallback)
  if (!w.jumping && !w.targetActive) {
    if (keys[w.controls.left])  { w.vx -= speed; isControlled = true; }
    if (keys[w.controls.right]) { w.vx += speed; isControlled = true; }
    if (keys[w.controls.up])    { w.vy -= speed; isControlled = true; }
    if (keys[w.controls.down])  { w.vy += speed; isControlled = true; }
  }

  // no flying
  if (!w.jumping) {
    if (w.y < seaLevel + 20) w.vy = Math.max(0, w.vy);
  }

  // idle drift
  if (!isControlled && !w.jumping) {
    w.driftAngle += 0.008 + Math.random()*0.003;
    w.vx += Math.cos(w.driftAngle) * 0.02;
    w.vy += Math.sin(w.driftAngle*0.8) * 0.008;
  }

  // physics
  w.vx *= 0.92; w.vy *= 0.92;
  w.x += w.vx;  w.y += w.vy;

  if (!w.jumping) {
    if (w.y < seaLevel + 20) w.y = seaLevel + 20;
  }
  w.y = Math.min(canvas.height - w.size*1.6, w.y);

  // auto-breach at surface when moving upward
  if (!w.jumping && w.y <= seaLevel + 21 && w.vy < -0.1) {
    if (canStartJump(w)) startJump(w);
  }

  // jump arc
  if (w.jumping) {
    w.jumpPhase += 0.015;
    const t = w.jumpPhase;
    const jumpHeight = 150;
    w.y = seaLevel - Math.sin(Math.PI * t) * jumpHeight + 20;
    // gentle horizontal steer during jump
    if (w.targetActive && w.target) {
      const dx = w.target.x - w.x;
      const ux = Math.sign(dx) * 0.08;
      w.vx += ux;
    } else {
      if (keys[w.controls.left])  w.vx -= 0.45*speed;
      if (keys[w.controls.right]) w.vx += 0.45*speed;
    }
    if (t >= 1) { w.jumping = false; w.jumpPhase = 0; w.vy = 0; }
  }

  // edge nudge (helps skim border after mission complete)
  if (missionReady && !w.jumping && w.x < 28) { w.vx -= 0.12; }

  w.tail += 0.08;

  // krill eating (scenario 0)
  if (scenario === 0) {
    for (let k of krill) {
      if (!k.eaten) {
        const dx = w.x - k.x, dy = w.y - k.y;
        if (Math.hypot(dx,dy) < w.size*0.6) {
          k.eaten = true;
          if (w.krillEaten < 10) w.krillEaten++;
        }
      }
    }
  }
}

// ---------- Baby follow ----------
function updateBaby() {
  if (!baby || !baby.mother) return;
  const m = baby.mother;
  const offsetBehind = -m.vx * 6;
  const side = (m.vx < 0 ? -1 : 1);
  const targetX = m.x + offsetBehind - side * (m.size * 0.4);
  const targetY = Math.max(seaLevel + 26, m.y + m.size * 0.25);

  const toTargetX = targetX - baby.x;
  const toTargetY = targetY - baby.y;

  const maxSpeed = Math.min(1.2, 0.7 + 0.3*Math.hypot(m.vx, m.vy));
  baby.vx += (toTargetX * 0.02);
  baby.vy += (toTargetY * 0.02);

  const sp = Math.hypot(baby.vx, baby.vy);
  if (sp > maxSpeed) { baby.vx = (baby.vx / sp) * maxSpeed; baby.vy = (baby.vy / sp) * maxSpeed; }

  baby.vx *= 0.95; baby.vy *= 0.95;
  baby.x += baby.vx; baby.y += baby.vy;

  if (baby.y < seaLevel + 20) baby.y = seaLevel + 20;
  baby.y = Math.min(canvas.height - baby.size*1.6, baby.y);
  baby.x = Math.max(-baby.size*3, Math.min(canvas.width + baby.size*3, baby.x));

  baby.tail += 0.1; baby.life += 0.02;
}

// ---------- Mission checks ----------
function isMissionComplete() {
  if (scenario === 0) return (whale1.krillEaten >= 10) && (whale2.krillEaten >= 10);
  if (scenario === 1) return (whale1.jumpsDone >= 5) && (whale2.jumpsDone >= 5);
  if (baby) return true;
  const d = Math.hypot(whale1.x-whale2.x, whale1.y-whale2.y);
  return d < Math.min(whale1.size, whale2.size) * 0.8;
}

// HUD
function updateHUD() {
  const c = document.getElementById('counter');
  if (scenario === 0) c.innerHTML = `Whale1: ${whale1.krillEaten} / 10<br/>Whale2: ${whale2.krillEaten} / 10`;
  else if (scenario === 1) c.innerHTML = `Whale1: ${whale1.jumpsDone} / 5 jumps<br/>Whale2: ${whale2.jumpsDone} / 5 jumps`;
  else c.innerHTML = `Join the whales!<br/>Distance: ${Math.round(Math.hypot(whale1.x-whale2.x, whale1.y-whale2.y))} px`;
}

// ---------- Main loop ----------
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawBackground();

  missionReady = isMissionComplete();
  showLeftArrow = missionReady;

  // Underwater entities by scenario
  if (scenario === 0) {
    for (let k of krill) {
      if (!k.eaten) {
        k.x -= k.speed;
        if (k.x < -10) k.x = canvas.width + 10;
        drawKrill(k);
      } else {
        k.y -= 0.6;
        k.x += Math.sin(k.y*0.02)*0.2;
        if (k.y < seaLevel + 10) k.y = seaLevel + 10;
      }
    }
  } else if (scenario === 1) {
    for (let f of fish) { f.x -= f.speed; if (f.x < -20) f.x = canvas.width+20; drawFish(f); }
    for (let s of seagulls) { drawSeagull(s); s.x += s.speed; if (s.x > canvas.width+50) s.x = -50; }
  } else {
    for (let c of corals) drawCoral(c);
    for (let f of fish) { f.x -= f.speed*0.6; if (f.x < -20) f.x = canvas.width+20; drawFish(f); }
  }

  updateWhale(whale1);
  updateWhale(whale2);

  if (scenario === 2 && !baby) {
    const d = Math.hypot(whale1.x-whale2.x, whale1.y-whale2.y);
    if (d < Math.min(whale1.size, whale2.size) * 0.8) spawnBaby();
  }
  if (baby) updateBaby();

  drawWhale(whale1);
  drawWhale(whale2);
  if (baby){ ctx.save(); ctx.globalAlpha = Math.min(1, baby.life * 1.3); drawWhale(baby); ctx.restore(); }

  updateHUD();

  if (showLeftArrow) {
    drawLeftArrow();
    drawEdgeHint();
  }

  // Advance if EITHER whale touches the left edge (when mission complete)
  const EDGE = 12;
  if (showLeftArrow && (whale1.x <= EDGE || whale2.x <= EDGE)) {
    scenario = (scenario + 1) % 3;
    initScenario(scenario);
    // reposition hint (in case of resized sky)
    const hintY = Math.max(12, Math.floor(seaLevel * 0.38));
    hintEl.style.top = `${hintY}px`;
  }

  requestAnimationFrame(loop);
}
loop();

// Touch input has been disabled to enforce keyboard-only controls.
// Original nearest-finger touch-assignment removed.

</script>
</body>
</html>
